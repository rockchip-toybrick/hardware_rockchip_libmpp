$(VEPU_CORE)_ENABLE = y
$(VEPU_CORE)_PP_ENABLE = y
MPP_SERVICE_DIR := mpp_service

EXTRA_CFLAGS += -DMPP_VERSION="\"$(VCODEC_REVISION)\""
EXTRA_CFLAGS += -D$(VEPU_CORE)_ENABLE
EXTRA_CFLAGS += -D$(VEPU_CORE)_PP_ENABLE
EXTRA_CFLAGS += -I$(KERNEL_ROOT)
EXTRA_CFLAGS += -I$(KERNEL_ROOT)/drviers/devfreq
EXTRA_CFLAGS += -I$(TOP)/osal/inc
EXTRA_CFLAGS += -I$(TOP)/include
EXTRA_CFLAGS += -I$(TOP)/mpp_osal
EXTRA_CFLAGS += -I$(TOP)/mpp_service

include $(TOP)/mpp/mpp_make.cfg
EXTRA_CFLAGS += $(MPP_CFLAGS)

${KMPP_SRC}-objs += $(MPP_CFILES)

${KMPP_SRC}-objs += $(MPP_SERVICE_DIR)/mpp_service.o $(MPP_SERVICE_DIR)/mpp_common.o $(MPP_SERVICE_DIR)/mpp_iommu.o

CONFIG_ROCKCHIP_MPP_RKVDEC = y
CONFIG_ROCKCHIP_MPP_RKVENC = y
CONFIG_ROCKCHIP_MPP_VDPU1 = y
CONFIG_ROCKCHIP_MPP_VEPU1 = y
CONFIG_ROCKCHIP_MPP_VDPU2 = y
CONFIG_ROCKCHIP_MPP_VEPU2 = y
CONFIG_ROCKCHIP_MPP_IEP2 = y
CONFIG_ROCKCHIP_MPP_JPGDEC = y
CONFIG_ROCKCHIP_MPP_JPGENC = y
CONFIG_ROCKCHIP_MPP_RKVDEC2 = y
CONFIG_ROCKCHIP_MPP_RKVENC2 = y
CONFIG_ROCKCHIP_MPP_AV1DEC = y
CONFIG_ROCKCHIP_MPP_VDPP = y

EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_RKVDEC
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_RKVENC
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_VDPU1
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_VEPU1
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_VDPU2
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_VEPU2
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_IEP2
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_JPGDEC
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_JPGENC
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_RKVDEC2
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_RKVENC2
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_AV1DEC
EXTRA_CFLAGS += -DCONFIG_ROCKCHIP_MPP_VDPP

${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_RKVDEC)  += $(MPP_SERVICE_DIR)/mpp_rkvdec.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_RKVDEC2) += $(MPP_SERVICE_DIR)/mpp_rkvdec2.o $(MPP_SERVICE_DIR)/mpp_rkvdec2_link.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_RKVENC)  += $(MPP_SERVICE_DIR)/mpp_rkvenc.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_RKVENC2) += $(MPP_SERVICE_DIR)/mpp_rkvenc2.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_VDPU1)   += $(MPP_SERVICE_DIR)/mpp_vdpu1.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_VEPU1)   += $(MPP_SERVICE_DIR)/mpp_vepu1.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_VDPU2)   += $(MPP_SERVICE_DIR)/mpp_vdpu2.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_VEPU2)   += $(MPP_SERVICE_DIR)/mpp_vepu2.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_IEP2)    += $(MPP_SERVICE_DIR)/mpp_iep2.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_JPGDEC)  += $(MPP_SERVICE_DIR)/mpp_jpgdec.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_JPGENC)  += $(MPP_SERVICE_DIR)/mpp_jpgenc.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_AV1DEC)  += $(MPP_SERVICE_DIR)/mpp_av1dec.o
${KMPP_SRC}-$(CONFIG_ROCKCHIP_MPP_VDPP)    += $(MPP_SERVICE_DIR)/mpp_vdpp.o

# hack for workaround
${KMPP_SRC}-$(CONFIG_CPU_PX30) += $(MPP_SERVICE_DIR)/hack/mpp_hack_px30.o
${KMPP_SRC}-$(CONFIG_CPU_RK3576) += $(MPP_SERVICE_DIR)/hack/mpp_hack_rk3576.o
${KMPP_SRC}-$(CONFIG_CPU_RK3576) += $(MPP_SERVICE_DIR)/hack/mpp_rkvdec2_hack_rk3568.o
${KMPP_SRC}-$(CONFIG_CPU_RK3576) += $(MPP_SERVICE_DIR)/hack/mpp_rkvdec2_link_hack_rk3568.o

${KMPP_SRC}-$(CONFIG_CPU_RV1126B) += $(MPP_SERVICE_DIR)/hack/mpp_rkvdec2_hack_rk3568.o
${KMPP_SRC}-$(CONFIG_CPU_RV1126B) += $(MPP_SERVICE_DIR)/hack/mpp_rkvdec2_link_hack_rk3568.o
